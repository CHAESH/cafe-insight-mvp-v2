# 카페인사이트 기능 요청 템플릿

## FEATURE: AI 기반 카페 원가계산 & 스마트 인사이트 MVP

### 기능 개요
- **기능 이름**: 카페인사이트 (CafeInsight) - AI 기반 카페 원가계산 SaaS
- **목적**: 카페 사장님들이 5분 계산으로 평생 절약할 수 있도록 AI 인사이트 제공
- **대상 사용자**: 기술 친화적 20-40대 카페 사장님 (월매출 3,000만원, 직원 3명 규모)
- **핵심 가치**: "5분 계산, 평생 절약 - AI가 찾아주는 숨은 수익 기회"

### 상세 요구사항
1. **원가계산 엔진**: 재료별 단가 × 수량으로 메뉴당 원가 자동 계산
2. **AI 절감 팁**: GPT-4o-mini 기반으로 비용 절약 방안 및 마진율 분석 제공
3. **가격 인사이트**: 업계 평균 대비 현재 마진율 분석 및 개선안 제안
4. **사용량 제한**: Free 플랜 월 10회, Premium 무제한 AI 분석
5. **결제 시스템**: 토스페이먼츠 정기결제 (월 10,000원)

### 예상 사용자 플로우
1. 카페 사장님이 구글에서 "카페 원가계산"으로 검색
2. 랜딩페이지에서 무료 가입 (이메일/비밀번호)
3. 대시보드에서 "새 메뉴 계산하기" 버튼 클릭
4. 메뉴명, 재료별 수량/단가 입력 
5. 실시간으로 원가/마진율 계산 결과 표시
6. "AI 절감 팁 받기" 버튼으로 스마트 인사이트 확인
7. 월 50만원 절약 가능한 구체적 조언에 놀라며 친구들에게 공유
8. 추가 계산 후 프리미엄 구독 전환

### UI/UX 요구사항
- **페이지 구조**: 
  - 랜딩페이지 (마케팅)
  - 대시보드 (계산 목록)
  - 계산 페이지 (메인 기능)
  - 구독 관리 페이지
- **레이아웃**: 모바일 우선 반응형 디자인 (카페에서 스마트폰 사용)
- **디자인**: 
  - 깔끔하고 신뢰감 있는 디자인
  - AI 기능은 특별함을 강조 (✨ 아이콘, 파란색 강조)
  - 절약 금액은 초록색으로 임팩트 있게 표시

## EXAMPLES: 참고할 기존 코드 패턴

### 현재 프로젝트 기반 (Supaplate)
- `app/features/auth/` - 사용자 인증 시스템 (이메일/비밀번호 로그인)
- `app/features/users/` - 사용자 관리 및 대시보드 구조
- `app/features/payments/` - 토스페이먼츠 결제 시스템
- `app/core/components/ui/` - 재사용 가능한 UI 컴포넌트들 (Button, Card, Input 등)

### 사용할 기술/라이브러리
- **Frontend**: React Router v7 + TypeScript + TailwindCSS
- **Backend**: Supabase (PostgreSQL + Auth + RLS)
- **AI 통합**: Vercel AI SDK + GPT-4o-mini (OpenAI API)
- **결제**: 토스페이먼츠 정기결제 API
- **이메일**: Resend (영수증, 알림)
- **배포**: Vercel Edge Runtime
- **모니터링**: Sentry (에러 추적)

## DOCUMENTATION: 관련 문서

### 내부 문서
- `docs/PRD.md` - **필수 참고** 제품 요구사항 명세서 (v1.0)
- `CLAUDE.md` - AI 개발 규칙 및 코딩 컨벤션
- `examples/` - 컴포넌트, API, 페이지 작성 패턴

### 외부 문서 (API)
- [Vercel AI SDK](https://sdk.vercel.ai/docs) - AI 통합 라이브러리
- [OpenAI API](https://platform.openai.com/docs/api-reference) - GPT-4o-mini 모델
- [Supabase Auth](https://supabase.com/docs/guides/auth) - 사용자 인증
- [토스페이먼츠 API](https://docs.tosspayments.com/reference) - 정기결제
- [Resend API](https://resend.com/docs) - 이메일 발송

### 참고 앱/웹사이트
- 기존 원가계산 앱들 (단순 계산기 수준 → AI로 차별화)
- ChatGPT 인터페이스 (AI 응답 UI 참고)
- 토스 앱 (결제 UX 참고)

## OTHER CONSIDERATIONS: 기타 고려사항

### 보안 요구사항
- **인증**: Supabase Auth 이메일/비밀번호 로그인 (소셜 로그인 제외)
- **데이터 보호**: 사용자별 계산 데이터 RLS(Row Level Security) 적용
- **API 보안**: OpenAI API 키는 서버 사이드에서만 사용
- **결제 보안**: 토스페이먼츠 정기결제 연동 시 카드 정보 미저장

### 성능 고려사항
- **AI 응답 속도**: 평균 1-5초 내 AI 팁 생성 (Edge Runtime 활용)
- **비용 최적화**: AI 팁 24시간 캐싱으로 중복 호출 방지
- **사용량 제한**: Free 사용자 월 10회 AI 호출로 비용 통제
- **모바일 최적화**: PWA 지원으로 앱 같은 경험 제공

### 테스트 요구사항
- **핵심 플로우**: 회원가입 → 계산 → AI 팁 → 결제 E2E 테스트
- **AI 기능**: 다양한 메뉴/재료 조합으로 AI 응답 품질 검증
- **결제 테스트**: 토스페이먼츠 샌드박스 환경에서 정기결제 테스트
- **성능 테스트**: Lighthouse 스코어 90+ 유지

### 다국어 지원
- **1차 MVP**: 한국어만 지원 (타겟이 한국 카페)
- **향후 확장**: 영어, 일본어 (해외 진출 시)
- **AI 응답**: 한국어 프롬프트로 현지화된 조언 제공

### 데이터베이스 변경
- **신규 테이블**:
  - `calculations` (원가 계산 데이터)
  - `ai_tips` (AI 팁 캐싱)
  - `ai_usage_logs` (AI 사용량 추적)
  - `subscriptions` (구독 관리)
- **기존 테이블 확장**:
  - `users` 테이블에 구독 상태, AI 사용량 필드 추가

---

## 작성 가이드
1. 위 템플릿의 각 섹션을 가능한 자세히 작성해주세요
2. 불확실한 부분은 "확인 필요" 또는 "AI와 상의 후 결정"으로 적어주세요
3. 참고 이미지나 링크가 있다면 추가해주세요
4. 이 파일을 완성한 후 AI에게 "/generate-prp INITIAL.md" 명령어를 사용하세요
